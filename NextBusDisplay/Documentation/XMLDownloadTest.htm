<html><head><title>Next Bus Display XML Download Feed URLs</title>
<!--
//                     "Page Name"__________________________________________,"path     ,"Page_Title_____________________________________________________________________________ ,"Descriptive_Comments_______________________________________________________________________________________________________________ ,"Many,Key,Words ___");
c++; item[c]=new Array("" ,"/" ,""
,"<A HREF=></A>"
,"");
  <li><a href="/" > </a></li>
//    <                                                                     > </a>
http://www.simple-talk.com/prettifier/default.php
http://www.manoli.net/csharpformat/
-->
<style type="text/css">
body { color: black; font-family: Arial, Tahoma, Helvetica, Verdana; background-color: #ffffff; }
font { font-family: Arial, "DejaVu Sans", "Liberation Sans", Freesans, sans-serif; font-size: 10px; }
basefont { font-family: Arial, "DejaVu Sans", "Liberation Sans", Freesans, sans-serif; font-size: 10px; }
.hdrfont { font-family: Arial, Tahoma, Helvetica, Verdana, sans-serif; font-size: 28px; color: white; background-color: black; }
.hdrfont2 { font-family: Arial, Tahoma, Helvetica, Verdana, sans-serif; font-size: 18px; color: white; background-color: navy; text-align: center;
    BORDER-BOTTOM: 3px solid silver; BORDER-LEFT: 3px solid silver; BORDER-RIGHT: 3px solid silver; BORDER-TOP: 3px solid silver;
    PADDING-BOTTOM: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px; PADDING-TOP: 3px; WIDTH: 95%; margin-left: 12pt; }
code { COLOR: black; FONT-FAMILY: Consolas, "Courier New", Courier, Monospace; font-size: 16px; font-weight: bold; background-color: #eeeeee;  }
pre { font-size: 16px; color: black; font-family: Consolas, "Courier New", Courier, Monospace; background-color: #f0f0ff;
    BORDER-BOTTOM: 1px solid; BORDER-LEFT: 1px solid; BORDER-RIGHT: 1px solid; BORDER-TOP: 1px solid;
    PADDING-BOTTOM: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px; PADDING-TOP: 3px; WIDTH: 95%; margin-left: 12pt; }
.note { font-size: 16px; color: black; font-family: Tahoma,Arial,Helvetica,Verdana; background-color: #eeeeee;
    BORDER-BOTTOM: 1px solid; BORDER-LEFT: 1px solid; BORDER-RIGHT: 1px solid; BORDER-TOP: 1px solid;
    PADDING-BOTTOM: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px; PADDING-TOP: 3px; margin-left: 12pt; }
.results { font-size: 16px; color: black; font-family: Consolas, "Courier New", Courier, Monospace; background-color: #cceeff;
    BORDER-BOTTOM: 1px solid; BORDER-LEFT: 1px solid; BORDER-RIGHT: 1px solid; BORDER-TOP: 1px solid;
    PADDING-BOTTOM: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px; PADDING-TOP: 3px; WIDTH: 95%; margin-left: 12pt; }
.codeBlue { color: blue; }
.codeRed { color: red; }
.codeGreen { color: green; }
.inlineCode { COLOR: black; FONT-FAMILY: Courier New, Monospace }                            \
</style>
</head><body>
<table align="center" cellpadding="1" cellspacing="1" border="1"><tr><td align="center" class="hdrfont">&nbsp;&nbsp;
Next Bus Display XML Download Feed URLs
&nbsp;&nbsp;</td></tr></table>
<blockquote>
<h4>http://webservices.nextbus.com/service/publicXMLFeed?command=commandName&amp;a=&lt;agency tag&gt;&amp;additionParams...</h4>
<h4><a href="NextBusXMLFeed.pdf">Next Bus XML Feed Documentation</a></h4>
<h4>Primary Commands</h4>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=agencyList" target=general>Agency List</a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=routeList&a=nctd" target=general>NCTD Route List</a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=routeConfig&a=nctd&r=398" target=_blank>Coaster Route Configuration</a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=routeConfig&a=nctd&r=399" target=_blank>Sprinter Route Configuration</a></li>

<h4>Multi-Stop Predictions Feed Coaster</h4>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=398|28000&stops=398|28000_ar" target=coaster>Coaster Oceanside Transit Center (398|28000)</a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=398|28001" target=coaster> Coaster Carlsbad Village Station      (398|28001)   </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=398|28002" target=coaster> Coaster Carlsbad Poinsettia Station   (398|28002)   </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=398|28003" target=coaster> Coaster Encinitas Station             (398|28003)   </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=398|28004" target=coaster> Coaster Solana Beach Station          (398|28004)   </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=398|28005" target=coaster> Coaster Sorrento Valley Station       (398|28005)   </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=398|28006" target=coaster> Coaster Old Town Station              (398|28006)   </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=398|28007" target=coaster> Coaster Santa Fe Station              (398|28007)   </a></li>

<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=398|28006&stops=398|28006_ar" target=coaster> Coaster Old Town Station Test _ar with No _ar     (398|28006)   </a></li>

<h4>Multi-Stop Predictions Feed Sprinter</h4>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27000&stops=399|27000_ar" target=sprinter>Sprinter - Oceanside Transit Center (399|27000)</a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27001" target=sprinter>     SPRINTER Coast Hwy Station                        (399|27001)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27002" target=sprinter>     SPRINTER Crouch St Station                        (399|27002)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27003" target=sprinter>     SPRINTER El Camino Real Station                   (399|27003)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27004" target=sprinter>     SPRINTER Rancho del Oro Station                   (399|27004)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27005" target=sprinter>     SPRINTER College Blvd Station                     (399|27005)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27006" target=sprinter>     SPRINTER Melrose Dr Station                       (399|27006)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27007" target=sprinter>     SPRINTER Vista Transit Center                     (399|27007)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27008" target=sprinter>     SPRINTER Civic Center - Vista Station             (399|27008)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27009" target=sprinter>     SPRINTER Buena Creek Station                      (399|27009)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27010" target=sprinter>     SPRINTER Palomar College Station                  (399|27010)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27011" target=sprinter>     SPRINTER San Marcos Civic Center Station          (399|27011)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27012" target=sprinter>     SPRINTER Cal State San Marcos Station             (399|27012)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27013" target=sprinter>     SPRINTER Nordahl Rd Station                       (399|27013)  </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=nctd&stops=399|27014&stops=399|27014_ar" target=sprinter> SPRINTER Escondido Transit Center  (399|27014)  </a></li>

<h4>Tests</h4>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictions&a=nctd&stopId=27001&r=399" target="test">Preditions ( stopId=27001&r=399 )</a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=predictions&a=nctd&stopId=28001&r=398" target="test">Preditions ( stopId=28001&r=398 )</a></li>

<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=schedule&a=nctd&command=schedule&r=398" target="test">Coaster Schedule </a></li>
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=schedule&a=nctd&command=schedule&r=399" target="test">Sprinter Schedule </a></li>
<!--
<li><a href="http://webservices.nextbus.com/service/publicXMLFeed?command=commandName&a=nctd&command=params" target="????"></a></li>
-->

<pre class="sql">
<span class="rem">-- NOTE: Datafeed  epochTime Is In Milliseconds Since "1/1/1970 00:00:00.000"- Use Left(epochTime, 10) To Calculate UTCTime
-- Compute DateTime From Epoch Time</span>
<span class="kwrd">DECLARE</span> @TestTime <span class="kwrd">BIGINT</span>, @epochTime <span class="kwrd">VARCHAR</span>(14)

<span class="kwrd">SELECT</span>  @epochTime=<span class="str">'1367882820000'</span>
<span class="kwrd">SELECT</span> @TestTime = <span class="preproc">CONVERT</span>(<span class="kwrd">BIGINT</span>, <span class="preproc">SUBSTRING</span>(@epochTime, 1, 10))

<span class="kwrd">SELECT</span>  <span class="preproc">DATEADD</span>(s, @TestTime, <span class="str">'19700101 00:00:00:000'</span>) TestTimeCvtd,
        <span class="preproc">GETUTCDATE</span>() UTCNow,
        <span class="preproc">DATEDIFF</span>(s, <span class="str">'19700101 00:00:00:000'</span>, <span class="preproc">GETUTCDATE</span>()) UTCTimeStamp,
        <span class="preproc">DATEADD</span>(s, <span class="preproc">DATEDIFF</span>(s, <span class="str">'19700101 05:00:00:000'</span>, <span class="preproc">GETUTCDATE</span>()), <span class="str">'19700101 05:00:00:000'</span>) UtcTimeCvtd,
        (@TestTime - <span class="preproc">CONVERT</span>(<span class="kwrd">BIGINT</span>, <span class="preproc">DATEDIFF</span>(s,<span class="str">'19700101 00:00:00:000'</span>,<span class="preproc">GETUTCDATE</span>())))/60 DiffMinutes
</pre>
</blockquote></body></html>
